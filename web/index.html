<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Hikari</title>
    <script type="text/javascript" src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/hikari.js"></script>
    <!--<link rel="stylesheet" href="lib/2048/main.css">-->
    <style id="dynamic-css"></style>
</head>

<body>
    <div>
        <span id="console"></span>
    </div>
    <div class="game-container game-2048-container">
        <div class="game-2048-grid">
            <div class="game-2048-row">
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
            </div>
            <div class="game-2048-row">
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
            </div>
            <div class="game-2048-row">
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
            </div>
            <div class="game-2048-row">
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
                <div class="game-2048-cell"></div>
            </div>
        </div>
        <div class="tile-container">
            <div class="tile tile-2 tile-position-1-3 tile-new">
                <div class="tile-inner">2</div>
            </div>
            <div class="tile tile-2 tile-position-2-1 tile-new">
                <div class="tile-inner">2</div>
            </div>
        </div>
    </div>
    <script type="text/javascript" defer>
        $(document).ready(function() {

            $('html').css({
                width: '100%',
                height: '100%',
                overflow: 'hidden',
                margin: '0 auto'
            });
            $('body').css({
                width: '100%',
                height: '100%',
                margin: '0 auto'
            });
            var bestSize = getBestSize();
            console.log(bestSize);
            $('#console').text(bestSize);

            var style = '';
            style +=
                '.game-2048-container {' +
                'width: ' + bestSize + 'px;' +
                'height: ' + bestSize + 'px;' +
                'background-color: ' + '#bbada0' + ';' +
                'margin: 0 auto;' +
                'border-radius: 10px' +
                '}\n' +
                '.game-2048-grid {' +
                'width: 100%;' +
                'height: 100%;' +
                'margin: 0 auto;' +
                'padding-top: 4%;' +
                '}\n' +
                '.game-2048-row {' +
                'width: 100%;' +
                'height: 20%;' +
                'margin-bottom: 4%;' +
                '}\n' +
                '.game-2048-cell {' +
                'width: 20%;' +
                'height: 100%;' +
                'margin-left: 4%;' +
                'float: left;' +
                'background-color: rgba(238,228,218,.35);' +
                '}\n';

            hikari.addGlobalStyle('game-2048', style);
        });
        /**
        获取符合当前屏幕最适合的25的倍数.
        */
        function getBestSize() {
            var h = $('body').height(),
                w = $('body').width(),
                s, t, m,
                i = 1;
            s = h > w ? w : h;
            m /= 2;
            m = h > w ? h : w;
            s -= 40;
            while (true) {
                t = i * 25;
                if (t > s || t > m) {
                    break;
                }
                i++;
            }
            s = t - 25;
            return s;
        }

    </script>
</body>

</html>
